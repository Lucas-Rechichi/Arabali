{% extends 'main/template.html' %} 
{% block title %} 
{{ user.username }} 
{% endblock %} 
{% block body %}
<div class="card profile">
  <img src="{{ userstats.banner.url }}" alt="" />
  <br />
  <div class="container">
    <div class="row">
      <div class="col-2 pt-4">
  <h2>Followers: {{ userstats.followers }}</h2>
</div>
<div class="col-3 pt-4">
  <button class="btn btn-outline-success" data-bs-toggle="modal" data-bs-target="#followers">Followers</button>
  <div class="modal fade" id="followers">
    <div class="modal-dialog modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Followers:</h3>
          <button class="btn-close" data-bs-dismiss="modal" data-bs-target="#followers"></button>
        </div>
        <div class="modal-body">
          {% for follower in followed_user%}
          {% for x in follower %}
          <button class="invis" style="width: 300px;" onclick='location.href = "/profile/{{x.user}}"'>
          <div class="row">
            <div class="column col-3">
          <img src="{{x.pfp.url}}" alt="{{x.user}}'s pfp" style="height: 50px; width: 50px;" class="border border-success rounded-circle border-2">
        </div>
        <div class="column col-6 pt-2">
          {{x.user}}
        </div>  
        </div>
          {% endfor %}
          {% endfor %}
        </button>
        </div>
      </div>
    </div>
  </div>
</div>
      <div class="col-1 offset-2">
        <img src="{{ userstats.pfp.url }}" alt="" class="profile-pfp border border-success rounded-circle border-2"/>
    </div>
    <div class="col-3 pt-4">
      <h1>{{ user.username }}</h1>
</div>
</div>
</div>
<br>

<form action="" method="post">
  {% csrf_token %} 
  {% if self_profile %}
  <div class="container">
    <button class="btn btn-success col-1" , onclick='location.href = "/edit/{{user.username}}"'>Edit</button>
    </div> 
  {% else %} 
  {% if is_following %}
  <button
    type="submit"
    name="follow"
    value="unfollow"
    class="btn btn-outline-success follow"
  >
    Unfollow
  </button>
  {% else %}
  <button
    type="submit"
    name="follow"
    value="follow"
    class="btn btn-success follow"
  >
    Follow
  </button>
  {% endif %} {% endif %}
</form>
  <br>
  <h2>Posts:</h2>
  <br>
  <div class="container text-center">
    <div class="row row-cols-2 gy-3">
      {% for posts in post %}
      <div class="col-3">
          <div class="card minipost pt-4">
            <button class="invis", onclick='location.href = "/posts/{{posts.id}}"'>
              <h5>{{posts.title}}</h5>
            </button>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
