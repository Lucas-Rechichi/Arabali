{% extends 'main/template.html' %} 
{% block title %} 
{{ user.username }} 
{% endblock %}
{% block topsidebar %}
<li class="custom-icon"><div class="fs-4"><i class="bi bi-person" style="color: #787878;"></i></div> <a href="/profile/{{user.username}}" class="link-secondary link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"><p class="lead">Profile</p></a></li>
{% endblock %}
{% block middlesidebar %}
<li class="custom-icon"><div class="fs-4"><i class="bi bi-gear-wide-connected" style="color: #787878;"></i></div> <a href="/settings/{{user.username}}" class="link-secondary link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"><p class="lead">Settings</p></a></li>
{% endblock %}
{% block body %}
<div class="card profile">
  <img src="{{ userstats.banner.url }}" alt="" />
  <br />
  <div class="container">
    <div class="row">
      <div class="col-2 pt-4">
  <h2>Followers: {{ userstats.followers }}</h2>
</div>
<div class="col-3 pt-4">
  <button class="btn btn-light border border-success" data-bs-toggle="modal" data-bs-target="#followers"><img src="/arabali_users/Images/App_Icons/Screenshot 2024-04-07 at 8.39.51 am.png" alt="" style="height: 30px; width: 30px;"> Followers</button>
  <div class="modal fade" id="followers">
    <div class="modal-dialog modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Followers:</h3>
          <button class="btn-close" data-bs-dismiss="modal" data-bs-target="#followers"></button>
        </div>
        <div class="modal-body">
          {% for follower in followed_user%}
          {% for x in follower %}
          <button class="invis" style="width: 300px;" onclick='location.href = "/profile/{{x.user}}"'>
          <div class="row">
            <div class="column col-3">
          <img src="{{x.pfp.url}}" alt="{{x.user}}'s pfp" style="height: 50px; width: 50px;" class="border border-success rounded-circle border-2">
        </div>
        <div class="column col-6 pt-2">
          {{x.user}}
        </div>  
        </div>
          {% endfor %}
          {% endfor %}
        </button>
        </div>
      </div>
    </div>
  </div>
</div>
      <div class="col-1 offset-2">
        <img src="{{ userstats.pfp.url }}" alt="" class="profile-pfp border border-success rounded-circle border-2"/>
    </div>
    <div class="col-3 pt-4">
      <h1>{{ user.username }}</h1>
</div>
</div>
</div>
<br>
{% if self_profile %}
{% else %}
<form action="" method="post">
  {% csrf_token %} 
  {% if is_following %}
  <button
    type="submit"
    name="follow"
    value="unfollow"
    class="btn btn-light follow border border-success"
  ><img src="/arabali_users/Images/App_Icons/Screenshot 2024-04-07 at 8.42.09 am.png" alt="" style="height: 30px; width: 30px;">
    Unfollow
  </button>
  {% else %}
  <button
    type="submit"
    name="follow"
    value="follow"
    class="btn btn-light follow border border-success"
  ><img src="/arabali_users/Images/App_Icons/Screenshot 2024-04-07 at 8.41.46 am.png" alt="" style="height: 30px; width: 30px;">
    Follow
  </button>
  {% endif %}
  {% endif %}
</form>
  <br>
  <h2>post:</h2>
  <br>
  <div class="container text-center">
    <div class="row row-cols-2 gy-3">
      {% for post in post %}
      <div class="col-3">
          <div class="card minipost pt-4">
            <button class="invis", onclick='location.href = "/post/{{post.id}}"'>
              <h5>{{post.title}}</h5>
            </button>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
