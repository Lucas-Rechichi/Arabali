<div id="expand-{{posts.id}}" class="modal fade">
                <div class="modal-dialog" style="max-width: 56%;">
                    <div class="modal-content">
                        <div class="modal-header">
                            Post
                            <button class="btn btn-close" data-bs-dismiss="modal" data-bs-target="#post-{{posts.id}}"></button>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col m-2">
                                {% for key, value in post_users.items %}
                                    {% if key|stringformat:"%s%s" == posts.user|stringformat:"%s%s" %}
                                        <button class="btn btn-light" style="border-radius: 15px; width: fit-content; height: fit-content;"><img src="{{ value }}", onclick='location.href = "/profile/{{posts.user}}"' style="width: 30px; height: 30px;"></button>
                                    {% else %}
                                    {% endif %}
                                {% endfor %}
                            </div>
                            </div>
                            <div class="row">
                                <div class="col m-2">
                                    <h6 class="display-6">{{posts.user}}</h6>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col m-2">
                                    <img src="{{posts.media.url}}" alt="{{posts.id}}'s Media" style="height: 248px; width: 100%;">
                                </div>
                            </div>
                            <div class="row m-2">
                                <div class="col">
                                    <h3 class="display-6">{{posts.title}}</h3>
                                </div>
                            </div>
                            <div class="row m-1">
                                <div class="col">
                                    <p class="lead">{{posts.contents}}</p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-4">
                                    <a class="btn btn-success" data-bs-toggle="collapse" href="#liked-by-{{posts.id}}" role="button" aria-expanded="false" aria-controls="liked-by-{{posts.id}}">Liked By</a> 
                                </div>
                                <div class="col-8 d-flex justify-content-end">
                                    <form action="" id="post-form" method="post">
                                        {% if user_liked_by in posts.liked_by.all %}
                                        <button type="submit" id="like{{posts.id}}" class="btn btn-success border border-success modal-like-button-{{posts.id}} d-flex align-items-center pb-3 pt-2" data-post-id="{{posts.id}}" style="height: 25px;">
                                            <div class="row align-items-center">
                                                <div class="col mt-1 d-flex justify-content-end">
                                                    <i class="bi bi-hand-thumbs-up-fill" id="modal-like-icon-{{posts.id}}" style="color: #ffffff;"></i>
                                                </div>
                                                <div class="col mt-4">
                                                    <p class="text-white" id="modal-like-text-{{posts.id}}">{{posts.likes}}</p>
                                                </div>
                                            </div>
                                        </button>
                                        {% else %}
                                        <button type="submit" id="like{{posts.id}}" class="btn border border-success modal-like-button-{{posts.id}} d-flex align-items-center pb-3 pt-2" data-post-id="{{posts.id}}" style="height: 25px;">
                                            <div class="row align-items-center">
                                                <div class="col mt-1 d-flex justify-content-end">
                                                    <i class="bi bi-hand-thumbs-up" id="modal-like-icon-{{posts.id}}" style="color: #198754;"></i>
                                                </div>
                                                <div class="col mt-4">
                                                    <p class="text-success" id="modal-like-text-{{posts.id}}">{{posts.likes}}</p>
                                                </div>
                                            </div>
                                        </button>
                                        {% endif %}
                                        <script>
                                            document.addEventListener('DOMContentLoaded', function() {
                                                $('.modal-like-button-{{posts.id}}').click(function() { // When the button is pressed
                                                    console.log('clicked');
                                                    var postId = $(this).data('post-id'); // Get Post ID
                                                    console.log('Post ID:', postId);
                                                
                                                    // Defining variables
                                                    var modalClickedButton = $('.modal-like-button-{{posts.id}}'); 
                                                    var pageClickedButton = $('.page-like-button-{{posts.id}}');
                                                    var isLiked
                                                    var modalLikeCounter
                                                    var pageLikeCounter
                                                    var modalLikeIcon
                                                    var pageLikeIcon
                                                    console.log('defined');
                                                    console.log(isLiked)
                
                                                    // AJAX request
                                                    $.ajax({
                                                        type: 'POST',
                                                        url: '/page/liked/',
                                                        data: {
                                                            'post_id': postId,
                                                            'csrfmiddlewaretoken': '{{ csrf_token }}'
                                                        },
                                                        
                                                        // If the request was successful
                                                        success: function(response) {
                                                            console.log('success');
                
                                                            // Getting relevent elements
                                                            modalLikeCounter = $('#modal-like-text-{{posts.id}}');
                                                            pageLikeCounter = $('#page-like-text-{{posts.id}}')
                                                            modalLikeIcon = $('#modal-like-icon-{{posts.id}}');
                                                            pageLikeIcon = $('#page-like-icon-{{posts.id}}')
                
                                                            // Changing text
                                                            modalLikeCounter.text(response.likes);
                                                            pageLikeCounter.text(response.likes);
                                                            
                                                            // Different style changes for different like statuses
                                                            if (response.isLiked) {
                                                                console.log('like');
                
                                                                
                                                                // Change classes for dislike state
                                                                modalLikeCounter.removeClass('text-success').addClass('text-white');
                                                                modalLikeIcon.removeClass('bi-hand-thumbs-up').addClass('bi-hand-thumbs-up-fill');
                                                                modalClickedButton.removeClass('liked-button').addClass('btn-success');
                                                                
                                                                pageLikeCounter.removeClass('text-success').addClass('text-white');
                                                                pageLikeIcon.removeClass('bi-hand-thumbs-up').addClass('bi-hand-thumbs-up-fill');
                                                                pageClickedButton.removeClass('liked-button').addClass('btn-success');
                
                                                                // Color change
                                                                modalLikeIcon = document.getElementById('modal-like-icon-{{posts.id}}')
                                                                modalLikeIcon.style.color = '#ffffff'
                                                                
                                                                pageLikeIcon = document.getElementById('page-like-icon-{{posts.id}}')
                                                                pageLikeIcon.style.color = '#ffffff'
                
                                                            } else {
                                                                console.log('dislike');
                
                                                                // Change classes for like state
                                                                modalLikeCounter.removeClass('text-white').addClass('text-success');
                                                                modalLikeIcon.removeClass('bi-hand-thumbs-up-fill').addClass('bi-hand-thumbs-up');
                                                                modalClickedButton.removeClass('btn-success').addClass('liked-button');
                                                                
                                                                pageLikeCounter.removeClass('text-white').addClass('text-success');
                                                                pageLikeIcon.removeClass('bi-hand-thumbs-up-fill').addClass('bi-hand-thumbs-up');
                                                                pageClickedButton.removeClass('btn-success').addClass('liked-button');
                
                
                                                                // Color change
                                                                modalLikeIcon = document.getElementById('modal-like-icon-{{posts.id}}')
                                                                modalLikeIcon.style.color = '#198754'
                                                                pageLikeIcon = document.getElementById('page-like-icon-{{posts.id}}')
                                                                pageLikeIcon.style.color = '#198754'
                                                            }
                                                        },
                                                        error: function(xhr, errmsg, err) {
                                                            console.log('Error:', xhr.ststus, xhr.statusText);
                                                        },
                                                        beforeSend: function(xhr, settings) {
                                                            console.log('Before send:', settings);
                                                            console.log('i.hasContent:', settings.hasContent);
                                                            console.log('i.data:', settings.data);
                                                        }
                                                    });
                                                });
                                                $(document).on('submit', '#post-form', function(e) {
                                                    e.preventDefault(); // Prevents reloading of the website
                                                    console.log('prevented');
                                                });
                                            });
                                        </script>
                                    </form>
                                </div>
                            </div>

                        <div class="row">
                            <div class="col">
                                <div class="collapse card m-1" id="liked-by-{{posts.id}}">
                                    <ul class="list-group list-group-flush">
                                        {% for likedby in posts.liked_by.all %}
                                            <li class="list-group-item"> > {{ likedby }}</li>
                                        {% endfor %}
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col text-center">
                                <p class="lead">Date Created: {{posts.created_at}}</p>
                            </div>
                            <div class="col text-center">
                                <p class="lead">Date Modified: {{posts.date_modified}}</p>
                            </div>
                        </div>
                        <br>
                        <div class="row">
                            <div class="col">
                                <p class="lead text-center">Comments:</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-6 d-flex justify-content-end">
                                <form method="post" id="comment-form-{{posts.id}}">
                                    {% csrf_token %}
                                    {{comment_form | crispy}}
                                    <input type="hidden" id="comment" name="comment" value="">
                                    <input type="hidden" id="post_id" name="post_id" value="">
                                    <button type="button" id="add-comment-{{posts.id}}" class="btn btn-success">Add</button>
                                </form>
                                <script>
                                    document.addEventListener('DOMContentLoaded', function() {
                                        document.getElementById('add-comment-{{posts.id}}').addEventListener('click', function() {
                                            document.getElementById('comment').value = 'comment';
                                            document.getElementById('post_id').value = '{{posts.id}}';
                                            document.getElementById('comment-form-{{posts.id}}').submit();
                                        });
                                    });
                                </script>
                            </div>
                            <div class="col-6">
                                
                            </div>
                        </div>
                        {% for postId, postData  in comment_list.items %}
                        {% for commentId, commentData in postData.items %}
                        {{commentData}}
                        <div class="row">
                            <div class="col">
                                
                                <div class="card p-3 m-2"> 
                                    <div class="row">
                                        <div class="col">
                                            {% for user_key, user_value in post_users.items %}
                                            {% if user_key|stringformat:"%s%s" == commentData.user|stringformat:"%s%s" %}
                                            <img class="border border-success" src="{{user_value}}" alt="" style="height:20px; width: 20px; border-radius: 10px;">
                                            <strong>{{commentData.user}}</strong>
                                            {% endif %}
                                            {% endfor %}
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            {{commentData.text}}
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-10">
                                            <a href="#nested-comments-{{commentData.id}}" data-bs-toggle="collapse" class="link-secondary link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover">Replies</a>
                                            <div class="collapse" id="nested-comments-{{commentData.id}}">
                                                <br> 
                                                <div class="card p-1">
                                                    <div class="row">
                                                        <div class="col">
                                                            {% for user_key, user_value in post_users.items %}
                                                            {% if user_key|stringformat:"%s%s" == commentData|stringformat:"%s%s" %}
                                                            <img class="border border-success" src="{{user_value}}" alt="" style="height:20px; width: 20px; border-radius: 10px;">
                                                            <em>{{sub_value.replies.user}}</em>
                                                            {% endif %}
                                                            {% endfor %}
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col">
                                                            {{commentData.sub_comments.text}}
                                                            
                                                        </div>
                                                        <div class="col d-flex justify-content-end">
                                                            {% if user_liked_by in sub_value.replies.liked__by.all %}
                                                            <button type="submit" id="like{{posts.id}}" class="btn btn-success border border-success nested-comment-like-button-{{sub_value.replies.id}} d-flex align-items-center pb-3 pt-2" data-comment-id="{{sub_value.replies.id}}" style="height: 25px;">
                                                                <div class="row align-items-center">
                                                                    <div class="col mt-1 d-flex justify-content-end">
                                                                        <i class="bi bi-hand-thumbs-up-fill" id="nested-comment-like-icon-{{sub_value.replies.id}}" style="color: #ffffff;"></i>
                                                                    </div>
                                                                    <div class="col mt-4">
                                                                        <p class="text-white" id="nested-comment-like-text-{{sub_value.replies.id}}">{{sub_value.replies.likes}}</p>
                                                                    </div>
                                                                </div>
                                                            </button>
                                                            {% else %}
                                                            <button type="submit" id="like{{posts.id}}" class="btn border border-success nested-comment-like-button-{{sub_value.replies.id}} d-flex align-items-center pb-3 pt-2" data-comment-id="{{sub_value.replies.id}}" style="height: 25px;">
                                                                <div class="row align-items-center">
                                                                    <div class="col mt-1 d-flex justify-content-end">
                                                                        <i class="bi bi-hand-thumbs-up" id="nested-comment-like-icon-{{sub_value.replies.id}}" style="color: #198754;"></i>
                                                                    </div>
                                                                    <div class="col mt-4">
                                                                        <p class="text-success" id="nested-comment-like-text-{{sub_value.replies.id}}">{{sub_value.replies.likes}}</p>
                                                                    </div>
                                                            {% endif %}
                                                                    <script>
                                                                        document.addEventListener('DOMContentLoaded', function() {
                                                                            $('.nested-comment-like-button-{{sub_value.replies.id}}').click(function() { // When the button is pressed
                                                                                console.log('clicked');
                                                                                var commentId = $(this).data('comment-id');
                                                                                console.log('Comment ID:', commentId)
                
                                                                                // Defining variables
                                                                                var button = $('.nested-comment-like-button-{{sub_value.replies.id}}');
                                                                                var counter
                                                                                var icon
                
                                                                                // AJAX
                                                                                $.ajax({
                                                                                    type: 'POST',
                                                                                    url: '/page/comment-liked/',
                                                                                    data: {
                                                                                        'comment_id': commentId,
                                                                                        'comment_type': 'nested-comment',
                                                                                        'csrfmiddlewaretoken': '{{ csrf_token }}'
                                                                                    },
                                                                                    success: function(response) {
                                                                                        console.log('success');
                
                                                                                        // Getting relevent elements
                                                                                        counter = $('#nested-comment-like-text-{{sub_value.replies.id}}')
                                                                                        icon = $('#nested-comment-like-icon-{{sub_value.replies.id}}')
                
                                                                                        // Changing text
                                                                                        counter.text(response.likes);
                
                                                                                        // Different styles for in the comment was liked of not
                                                                                        if (response.isLiked) {
                                                                                            console.log('like');
                
                                                                                            // Change classes for dislike state
                                                                                            counter.removeClass('text-success').addClass('text-white');
                                                                                            icon.removeClass('bi-hand-thumbs-up').addClass('bi-hand-thumbs-up-fill');
                                                                                            button.removeClass('liked-button').addClass('btn-success');
                
                                                                                            // Color change
                                                                                            icon = document.getElementById('nested-comment-like-icon-{{sub_value.replies.id}}');
                                                                                            icon.style.color = '#ffffff';
                
                                                                                        } else {
                                                                                            console.log('dislike');
                
                                                                                            // Change classes for dislike state
                                                                                            counter.removeClass('text-white').addClass('text-success');
                                                                                            icon.removeClass('bi-hand-thumbs-up-fill').addClass('bi-hand-thumbs-up');
                                                                                            button.removeClass('btn-success').addClass('liked-button');
                
                                                                                            // Color change
                                                                                            icon = document.getElementById('nested-comment-like-icon-{{sub_value.replies.id}}');
                                                                                            icon.style.color = '#198754';                                                                      
                                                                                        }
                                                                                    },
                                                                                    error: function(xhr, errmsg, err) {
                                                                                        console.log('Error:', xhr.ststus, xhr.statusText);
                                                                                    },
                                                                                    beforeSend: function(xhr, settings) {
                                                                                        console.log('Before send:', settings);
                                                                                        console.log('i.hasContent:', settings.hasContent);
                                                                                        console.log('i.data:', settings.data);
                                                                                    }
                                                                                })
                                                                            });
                                                                        });
                                                                    </script>
                                                                </div>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                            <div class="col d-flex justify-content-end">
                                                {% if user_liked_by in sub_value.liked__by.all %}
                                                <button type="submit" id="like{{posts.id}}" class="btn btn-success border border-success comment-like-button-{{sub_value.id}} d-flex align-items-center pb-3 pt-2" data-comment-id="{{sub_value.id}}" style="height: 25px;">
                                                    <div class="row align-items-center">
                                                        <div class="col mt-1 d-flex justify-content-end">
                                                            <i class="bi bi-hand-thumbs-up-fill" id="comment-like-icon-{{sub_value.id}}" style="color: #ffffff;"></i>
                                                        </div>
                                                        <div class="col mt-4">
                                                            <p class="text-white" id="comment-like-text-{{sub_value.id}}">{{sub_value.likes}}</p>
                                                        </div>
                                                    </div>
                                                </button>
                                                {% else %}
                                                <button type="submit" id="like{{posts.id}}" class="btn border border-success comment-like-button-{{sub_value.id}} d-flex align-items-center pb-3 pt-2" data-comment-id="{{sub_value.id}}" style="height: 25px;">
                                                    <div class="row align-items-center">
                                                        <div class="col mt-1 d-flex justify-content-end">
                                                            <i class="bi bi-hand-thumbs-up" id="comment-like-icon-{{sub_value.id}}" style="color: #198754;"></i>
                                                        </div>
                                                        <div class="col mt-4">
                                                            <p class="text-success" id="comment-like-text-{{sub_value.id}}">{{sub_value.likes}}</p>
                                                        </div>
                                                {% endif %}
                                                        <script>
                                                            document.addEventListener('DOMContentLoaded', function() {
                                                                $('.comment-like-button-{{sub_value.id}}').click(function() { // When the button is pressed
                                                                    console.log('clicked');
                                                                    var commentId = $(this).data('comment-id');
                                                                    console.log('Comment ID:', commentId)

                                                                    // Defining variables
                                                                    var button = $('.comment-like-button-{{sub_value.id}}');
                                                                    var counter
                                                                    var icon

                                                                    // AJAX
                                                                    $.ajax({
                                                                        type: 'POST',
                                                                        url: '/page/comment-liked/',
                                                                        data: {
                                                                            'comment_id': commentId,
                                                                            'comment_type': 'comment',
                                                                            'csrfmiddlewaretoken': '{{ csrf_token }}'
                                                                        },
                                                                        success: function(response) {
                                                                            console.log('success');

                                                                            // Getting relevent elements
                                                                            counter = $('#comment-like-text-{{sub_value.id}}')
                                                                            icon = $('#comment-like-icon-{{sub_value.id}}')

                                                                            // Changing text
                                                                            counter.text(response.likes);

                                                                            // Different styles for in the comment was liked of not
                                                                            if (response.isLiked) {
                                                                                console.log('like');

                                                                                // Change classes for dislike state
                                                                                counter.removeClass('text-success').addClass('text-white');
                                                                                icon.removeClass('bi-hand-thumbs-up').addClass('bi-hand-thumbs-up-fill');
                                                                                button.removeClass('liked-button').addClass('btn-success');

                                                                                // Color change
                                                                                icon = document.getElementById('comment-like-icon-{{sub_value.id}}');
                                                                                icon.style.color = '#ffffff';

                                                                            } else {
                                                                                console.log('dislike');

                                                                                // Change classes for dislike state
                                                                                counter.removeClass('text-white').addClass('text-success');
                                                                                icon.removeClass('bi-hand-thumbs-up-fill').addClass('bi-hand-thumbs-up');
                                                                                button.removeClass('btn-success').addClass('liked-button');

                                                                                // Color change
                                                                                icon = document.getElementById('comment-like-icon-{{sub_value.id}}');
                                                                                icon.style.color = '#198754';                                                                      
                                                                            }
                                                                        },
                                                                        error: function(xhr, errmsg, err) {
                                                                            console.log('Error:', xhr.ststus, xhr.statusText);
                                                                        },
                                                                        beforeSend: function(xhr, settings) {
                                                                            console.log('Before send:', settings);
                                                                            console.log('i.hasContent:', settings.hasContent);
                                                                            console.log('i.data:', settings.data);
                                                                        }
                                                                    })
                                                                });
                                                            });
                                                    </script>
                                                </div>
                                            </button>
                                        </div> 
                                    </div>
                                </div> 
                                {% endfor %}
                                {% endfor %} 
                            </div>
                        </div>
                    </div>
                </div>
            </div>   
        </div>




        {% for postId, postData  in comment_list.items %}
                        {% for commentId, commentData in postData.items %}
                        {{commentData}}
                        <div class="row">
                            <div class="col">
                                
                                <div class="card p-3 m-2"> 
                                    <div class="row">
                                        <div class="col">
                                            {% for user_key, user_value in post_users.items %}
                                            {% if user_key|stringformat:"%s%s" == commentData.user|stringformat:"%s%s" %}
                                            <img class="border border-success" src="{{user_value}}" alt="" style="height:20px; width: 20px; border-radius: 10px;">
                                            <strong>{{commentData.user}}</strong>
                                            {% endif %}
                                            {% endfor %}
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            {{commentData.text}}
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-10">
                                            <a href="#nested-comments-{{commentData.id}}" data-bs-toggle="collapse" class="link-secondary link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover">Replies</a>
                                            <div class="collapse" id="nested-comments-{{commentData.id}}">
                                                <br> 
                                                <div class="card p-1">
                                                    <div class="row">
                                                        <div class="col">
                                                            {% for user_key, user_value in post_users.items %}
                                                            {% if user_key|stringformat:"%s%s" == commentData|stringformat:"%s%s" %}
                                                            <img class="border border-success" src="{{user_value}}" alt="" style="height:20px; width: 20px; border-radius: 10px;">
                                                            <em>{{sub_value.replies.user}}</em>
                                                            {% endif %}
                                                            {% endfor %}
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col">
                                                            {{commentData.sub_comments.text}}
                                                            
                                                        </div>
                                                        <div class="col d-flex justify-content-end">
                                                            {% if user_liked_by in sub_value.replies.liked__by.all %}
                                                            <button type="submit" id="like{{posts.id}}" class="btn btn-success border border-success nested-comment-like-button-{{sub_value.replies.id}} d-flex align-items-center pb-3 pt-2" data-comment-id="{{sub_value.replies.id}}" style="height: 25px;">
                                                                <div class="row align-items-center">
                                                                    <div class="col mt-1 d-flex justify-content-end">
                                                                        <i class="bi bi-hand-thumbs-up-fill" id="nested-comment-like-icon-{{sub_value.replies.id}}" style="color: #ffffff;"></i>
                                                                    </div>
                                                                    <div class="col mt-4">
                                                                        <p class="text-white" id="nested-comment-like-text-{{sub_value.replies.id}}">{{sub_value.replies.likes}}</p>
                                                                    </div>
                                                                </div>
                                                            </button>
                                                            {% else %}
                                                            <button type="submit" id="like{{posts.id}}" class="btn border border-success nested-comment-like-button-{{sub_value.replies.id}} d-flex align-items-center pb-3 pt-2" data-comment-id="{{sub_value.replies.id}}" style="height: 25px;">
                                                                <div class="row align-items-center">
                                                                    <div class="col mt-1 d-flex justify-content-end">
                                                                        <i class="bi bi-hand-thumbs-up" id="nested-comment-like-icon-{{sub_value.replies.id}}" style="color: #198754;"></i>
                                                                    </div>
                                                                    <div class="col mt-4">
                                                                        <p class="text-success" id="nested-comment-like-text-{{sub_value.replies.id}}">{{sub_value.replies.likes}}</p>
                                                                    </div>
                                                            {% endif %}
                                                                    <script>
                                                                        document.addEventListener('DOMContentLoaded', function() {
                                                                            $('.nested-comment-like-button-{{sub_value.replies.id}}').click(function() { // When the button is pressed
                                                                                console.log('clicked');
                                                                                var commentId = $(this).data('comment-id');
                                                                                console.log('Comment ID:', commentId)
                
                                                                                // Defining variables
                                                                                var button = $('.nested-comment-like-button-{{sub_value.replies.id}}');
                                                                                var counter
                                                                                var icon
                
                                                                                // AJAX
                                                                                $.ajax({
                                                                                    type: 'POST',
                                                                                    url: '/page/comment-liked/',
                                                                                    data: {
                                                                                        'comment_id': commentId,
                                                                                        'comment_type': 'nested-comment',
                                                                                        'csrfmiddlewaretoken': '{{ csrf_token }}'
                                                                                    },
                                                                                    success: function(response) {
                                                                                        console.log('success');
                
                                                                                        // Getting relevent elements
                                                                                        counter = $('#nested-comment-like-text-{{sub_value.replies.id}}')
                                                                                        icon = $('#nested-comment-like-icon-{{sub_value.replies.id}}')
                
                                                                                        // Changing text
                                                                                        counter.text(response.likes);
                
                                                                                        // Different styles for in the comment was liked of not
                                                                                        if (response.isLiked) {
                                                                                            console.log('like');
                
                                                                                            // Change classes for dislike state
                                                                                            counter.removeClass('text-success').addClass('text-white');
                                                                                            icon.removeClass('bi-hand-thumbs-up').addClass('bi-hand-thumbs-up-fill');
                                                                                            button.removeClass('liked-button').addClass('btn-success');
                
                                                                                            // Color change
                                                                                            icon = document.getElementById('nested-comment-like-icon-{{sub_value.replies.id}}');
                                                                                            icon.style.color = '#ffffff';
                
                                                                                        } else {
                                                                                            console.log('dislike');
                
                                                                                            // Change classes for dislike state
                                                                                            counter.removeClass('text-white').addClass('text-success');
                                                                                            icon.removeClass('bi-hand-thumbs-up-fill').addClass('bi-hand-thumbs-up');
                                                                                            button.removeClass('btn-success').addClass('liked-button');
                
                                                                                            // Color change
                                                                                            icon = document.getElementById('nested-comment-like-icon-{{sub_value.replies.id}}');
                                                                                            icon.style.color = '#198754';                                                                      
                                                                                        }
                                                                                    },
                                                                                    error: function(xhr, errmsg, err) {
                                                                                        console.log('Error:', xhr.ststus, xhr.statusText);
                                                                                    },
                                                                                    beforeSend: function(xhr, settings) {
                                                                                        console.log('Before send:', settings);
                                                                                        console.log('i.hasContent:', settings.hasContent);
                                                                                        console.log('i.data:', settings.data);
                                                                                    }
                                                                                })
                                                                            });
                                                                        });
                                                                    </script>
                                                                </div>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                            <div class="col d-flex justify-content-end">
                                                {% if user_liked_by in sub_value.liked__by.all %}
                                                <button type="submit" id="like{{posts.id}}" class="btn btn-success border border-success comment-like-button-{{sub_value.id}} d-flex align-items-center pb-3 pt-2" data-comment-id="{{sub_value.id}}" style="height: 25px;">
                                                    <div class="row align-items-center">
                                                        <div class="col mt-1 d-flex justify-content-end">
                                                            <i class="bi bi-hand-thumbs-up-fill" id="comment-like-icon-{{sub_value.id}}" style="color: #ffffff;"></i>
                                                        </div>
                                                        <div class="col mt-4">
                                                            <p class="text-white" id="comment-like-text-{{sub_value.id}}">{{sub_value.likes}}</p>
                                                        </div>
                                                    </div>
                                                </button>
                                                {% else %}
                                                <button type="submit" id="like{{posts.id}}" class="btn border border-success comment-like-button-{{sub_value.id}} d-flex align-items-center pb-3 pt-2" data-comment-id="{{sub_value.id}}" style="height: 25px;">
                                                    <div class="row align-items-center">
                                                        <div class="col mt-1 d-flex justify-content-end">
                                                            <i class="bi bi-hand-thumbs-up" id="comment-like-icon-{{sub_value.id}}" style="color: #198754;"></i>
                                                        </div>
                                                        <div class="col mt-4">
                                                            <p class="text-success" id="comment-like-text-{{sub_value.id}}">{{sub_value.likes}}</p>
                                                        </div>
                                                {% endif %}
                                                        <script>
                                                            document.addEventListener('DOMContentLoaded', function() {
                                                                $('.comment-like-button-{{sub_value.id}}').click(function() { // When the button is pressed
                                                                    console.log('clicked');
                                                                    var commentId = $(this).data('comment-id');
                                                                    console.log('Comment ID:', commentId)

                                                                    // Defining variables
                                                                    var button = $('.comment-like-button-{{sub_value.id}}');
                                                                    var counter
                                                                    var icon

                                                                    // AJAX
                                                                    $.ajax({
                                                                        type: 'POST',
                                                                        url: '/page/comment-liked/',
                                                                        data: {
                                                                            'comment_id': commentId,
                                                                            'comment_type': 'comment',
                                                                            'csrfmiddlewaretoken': '{{ csrf_token }}'
                                                                        },
                                                                        success: function(response) {
                                                                            console.log('success');

                                                                            // Getting relevent elements
                                                                            counter = $('#comment-like-text-{{sub_value.id}}')
                                                                            icon = $('#comment-like-icon-{{sub_value.id}}')

                                                                            // Changing text
                                                                            counter.text(response.likes);

                                                                            // Different styles for in the comment was liked of not
                                                                            if (response.isLiked) {
                                                                                console.log('like');

                                                                                // Change classes for dislike state
                                                                                counter.removeClass('text-success').addClass('text-white');
                                                                                icon.removeClass('bi-hand-thumbs-up').addClass('bi-hand-thumbs-up-fill');
                                                                                button.removeClass('liked-button').addClass('btn-success');

                                                                                // Color change
                                                                                icon = document.getElementById('comment-like-icon-{{sub_value.id}}');
                                                                                icon.style.color = '#ffffff';

                                                                            } else {
                                                                                console.log('dislike');

                                                                                // Change classes for dislike state
                                                                                counter.removeClass('text-white').addClass('text-success');
                                                                                icon.removeClass('bi-hand-thumbs-up-fill').addClass('bi-hand-thumbs-up');
                                                                                button.removeClass('btn-success').addClass('liked-button');

                                                                                // Color change
                                                                                icon = document.getElementById('comment-like-icon-{{sub_value.id}}');
                                                                                icon.style.color = '#198754';                                                                      
                                                                            }
                                                                        },
                                                                        error: function(xhr, errmsg, err) {
                                                                            console.log('Error:', xhr.ststus, xhr.statusText);
                                                                        },
                                                                        beforeSend: function(xhr, settings) {
                                                                            console.log('Before send:', settings);
                                                                            console.log('i.hasContent:', settings.hasContent);
                                                                            console.log('i.data:', settings.data);
                                                                        }
                                                                    })
                                                                });
                                                            });
                                                    </script>
                                                </div>
                                            </button>
                                        </div> 
                                    </div>
                                </div> 
                                {% endfor %}
                                {% endfor %} 
                            </div>
                        </div>
                    </div>
                </div>